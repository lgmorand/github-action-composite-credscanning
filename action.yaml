name: 'Credentials scanning'
description: 'Scan source code to find if credentials have been hardcoded'
inputs:
  folderToScan:  # path
    description: 'The folder where to scan files'
    required: true
    default: '/src'
outputs:
  scanned-files: 
    description: "Number of files scanned"
    value: ${{ steps.scanned-files.outputs.filesNo }}
runs:
  using: "composite"
  steps: 
    - run: grep "password" . -R > ../result.txt
      shell: bash
      working-directory: ${{ github.event.inputs.folderToScan }}
    - id: scanned-files
      run: |
         NUMBER=$(wc -l result.txt)
         echo "::set-output name=filesNo::$(echo $NUMBER)"
      shell: bash
    - uses: actions/upload-artifact@v1
        with:
          name: "Results"
          path: result.txt
